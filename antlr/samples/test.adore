fragment e1 <x,y> {
  variables  {}
  activities { h. hook() ; }
  relations  { ^ < h; h < $; }
}


fragment e2 {
  variables  {} 
  activities { h.  hook() ; }
  relations  { ^ < h; h < $; }
}


orchestration helloWorld::sayHello {
  variables { 
    name as string; 
    const prefix := 'Hello, ' as string;
    v as struct;
  }
  activities {
    a1. name := receive();
    a2. name.toto* := stringConcat(prefix, name.length*);
    a3. reply(name);
    a4. nop();
  }
  relations { a1 < a2; fail(a2,'foo bar') < a3; fail(a2) < a3; }
}


composition helloWorld::sayHello as foo { 
      apply e2 => e1::h;
      apply e1(x: 'X', y: 'bar') => {a1,a2} ; 
      toSet name ;
}

